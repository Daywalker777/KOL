THeapOnFile (C) by Kladov Vladimir, 2001
Требуется Key Objects Library v1.0, http://xcl.cjb.net
------------------------------------------------

Данный объект был создан в результате некоторых моих исследований. Когда я решал задачку, которая потребовала неслыханного количества блоков памяти нескольких различных размеров. И когда количество памяти, востребованной приложением, превысило возможности виртуальной памяти системы (Windows2000), та упала со страшным грохотом (синий экран? Чепуха! Видел я синий экран раньше, но такое... Мертвая машина, искореженное изображение на экране, и ноль реакций на салют из трех пальцев). Тогда я решил сделать этот небольшой инструмент для выделения памяти. Он позволил продолжить мне решение задачи, т.к. память выделялась не из виртуальной памяти Windows, а в куче на файле, который мог расти насколько позволяло место на диске. И в памяти оставалось только ограниченное число записей, блокированных приложением. Данное решение несколько снижает производительность (по моим "ощущениям" - процентов на 5-10), но оно тем не менее позволяет все-таки решить задачу, требующую слишком много памяти. Чтобы сравнить результаты с предыдущей ситуацией, когда память выделяется непосредственно, просто замените в ссылку в 'uses' с HeapOnFile.pas на HeapOnFileDummy.pas, и перекомпилируйте проект. (Но сначала весь код должен быть переориентирован на использование объекта THeapOnFile, конечно).

--------------------------------------------------------------------
http://xcl.cjb.net
bonanzas@xcl.cjb.net